{% extends 'dashboard-base.html.twig' %}


{% block title %}Event{% endblock %}
{% block nav %}
                <div class="navbar-nav w-100">
                    <a href="index.html" class="nav-item nav-link active"><i class="fa fa-tachometer-alt me-2"></i>Dashboard</a>
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"><i class="fa fa-laptop me-2"></i>Gestion events</a>
                        <div class="dropdown-menu bg-transparent border-0">
                            <a href="{{ path('app_addEvent')}}" class="dropdown-item">create event</a>
                            <a href="{{ path('app_addCategorie')}}" class="dropdown-item">create type</a>
                            <a href="{{ path('app_event_categorie')}}" class="dropdown-item">list type</a>
                                    <a href="{{ path('app_reservation')}}" class="dropdown-item">list reservation</a>

                        </div>
                    </div>
                    
                </div>
            </nav>
        </div>

        <!-- Sidebar End -->
{% endblock %}
{% block body %}
    <h1>Event index</h1>
    
    {{ form_start(form) }}
        {# {{ form_row(form.dateBeg) }}
        {{ form_row(form.dateEnd) }} #}
        {{ form_row(form.nbPlaceMax) }}
        {{ form_row(form.categorie, {'empty_data': null}) }}
        {{ form_row(form.Search) }}
    {{ form_end(form) }}

    <div class="row">
        {% for e in ev %}
        {% if (form.Search.vars.value is empty or e.title matches '/^.*' ~ form.Search.vars.value ~ '.*$/i') and
                  (form.nbPlaceMax.vars.value is empty or e.nbPlaceMax <= form.nbPlaceMax.vars.value) and
                  (form.categorie.vars.value is empty or e.categorie.id == form.categorie.vars.value) %}
            <div class="col-lg-4 col-md-6 filter-item masonary-item {{e.categorie.nom}}">
                <div class="collection-grid__single">
                    <div class="collection-grid__image">
                        <img src="http://localhost/img/{{e.image}}" width="363" height="363" alt="">
                    </div><!-- /.collection-grid__image -->
                    <div class="collection-grid__content">
                        <h3><a href="{{ path('app_detailEvent', {'id': e.id}) }}">{{e.title}}</a></h3>
                       <strong>Description:</strong> <p>{{e.description}}</p>
<strong>Nombre de places maximum:</strong> <p>{{e.nbPlaceMax}}</p>
<strong>Date de début:</strong> <p>{{e.dateBeg |date('Y-m-d')}}</p>
<strong>Date de fin:</strong> <p>{{e.dateEnd |date('Y-m-d')}}</p>
{% if e.categorie is not null %}
    <strong>Catégorie:</strong> <p>{{ e.categorie.nom }}</p>
{% else %}
    <strong>Catégorie:</strong> <p>No category</p>
{% endif %}

                        <a href="{{ path('app_updateEvent', {'id': e.id}) }}">edit</a>
                        <a href="{{ path('app_deleteEvent', {'id': e.id}) }}">delete</a>
                        {# <a href="{{ path('app_detailEvent', {'id': e.id}) }}">details</a> #}
                    </div><!-- /.collection-grid__content -->
                </div><!-- /.collection-grid__single -->
            </div><!-- /.col-lg-4 col-md-6 filter-item masonary-item -->
            
            {% if loop.index is divisible by(3) %}
                </div><div class="row">
            {% endif %}
             {% endif %}
        {% endfor %}
    </div><!-- /.row -->

    <a href="{{ path('app_addEvent') }}">Create new</a>
    <a href="{{ path('app_event_categorie') }}">Categories</a>
    
{% endblock %}
  
           